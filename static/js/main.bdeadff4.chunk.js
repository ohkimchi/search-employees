(this["webpackJsonpsearch-employees"]=this["webpackJsonpsearch-employees"]||[]).push([[0],{40:function(e,t,n){e.exports=n(55)},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(20),u=n.n(o),l=n(19),s=n(23),i=n(15),p=n(72),E=n(77),m=n(22);!function(e){e.SET_CURRENT_PAGE="SET_CURRENT_PAGE",e.SET_DIRECT_SUB="SET_DIRECT_SUB",e.SET_NON_DIRECT_SUB="SET_NON_DIRECT_SUB",e.SET_EMPLOYEE_NAME="SET_EMPLOYEE_NAME",e.SET_NO_RESULT="SET_NO_RESULT"}(a||(a={}));var b={currentPage:"SearchPage",directSub:[""],employeeName:"",nonDirectSub:[],noResult:!1},d=Object(r.createContext)({});function S(e,t){switch(t.type){case a.SET_CURRENT_PAGE:return Object(m.a)({},e,{currentPage:t.currentPage});case a.SET_DIRECT_SUB:return Object(m.a)({},e,{directSub:t.directSub});case a.SET_NON_DIRECT_SUB:return Object(m.a)({},e,{nonDirectSub:t.nonDirectSub});case a.SET_EMPLOYEE_NAME:return Object(m.a)({},e,{employeeName:t.employeeName});case a.SET_NO_RESULT:return Object(m.a)({},e,{noResult:t.noResult});default:return e}}var f=n(18),_=n(3),h=n.n(_),v=Object(p.a)((function(e){return Object(E.a)({demo:{backgroundColor:e.palette.background.paper,margin:"auto",width:"85%"}})}));function N(e){return e.map((function(e,t){return c.a.createElement("p",{key:"".concat(e,"-").concat(t)},e)}))}var y=function(){var e=v(),t=Object(r.useContext)(d),n=t.state;t.dispatch,Object(i.e)().location.pathname.split("/").splice(-1)[0];return c.a.createElement("div",null,c.a.createElement("h1",null,"Employee Overview"),""!==n.employeeName&&c.a.createElement("div",null,c.a.createElement("div",{className:e.demo},c.a.createElement("p",null,"Subordinates of employee ",n.employeeName,": (",n.directSub.length,")"),c.a.createElement("div",null,N(n.directSub))),0!==n.nonDirectSub.length&&c.a.createElement("div",{className:e.demo},c.a.createElement("p",null,"Non-direct subordinates of employee ",n.employeeName,": (",n.nonDirectSub.length,")"),c.a.createElement("div",null,N(n.nonDirectSub)))))},T=n(75),O=n(76),g=n(74),x=n(38),R=n.n(x),w=Object(p.a)((function(e){return Object(E.a)({iconButton:{padding:10},input:{flex:1,marginLeft:e.spacing(1)},root:{alignItems:"center",display:"flex",margin:"auto",padding:"2px 4px",width:300}})})),j={ResultPage:y,SearchPage:function(){var e=w(),t=Object(r.useContext)(d),n=t.state,o=t.dispatch,u=Object(r.useState)(""),s=Object(l.a)(u,2),i=s[0],p=s[1],E=Object(r.useState)(!1),m=Object(l.a)(E,2),b=m[0],S=m[1];return c.a.createElement("div",{className:"search-page"},c.a.createElement("h1",null,"Employee Explorer"),c.a.createElement(g.a,{component:"form",className:e.root},c.a.createElement(O.a,{className:e.input,placeholder:"Search Employee Name",inputProps:{"aria-label":"search employee name"},onChange:function(e){return function(e){p(e),""!==e&&S(!1),o({noResult:!1,type:a.SET_NO_RESULT})}(e.target.value)}}),c.a.createElement(T.a,{type:"submit",className:e.iconButton,"aria-label":"search",onClick:function(e){return function(e){var t,n;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.preventDefault(),""!==i){r.next=5;break}S(!0),r.next=19;break;case 5:return r.next=7,h.a.awrap(C(i));case 7:if(!(t=r.sent)){r.next=18;break}return r.next=11,h.a.awrap(D(t,[]));case 11:(n=r.sent)!==[]&&o({nonDirectSub:n,type:a.SET_NON_DIRECT_SUB}),o({directSub:t,type:a.SET_DIRECT_SUB}),o({employeeName:i,type:a.SET_EMPLOYEE_NAME}),o({currentPage:"ResultPage",type:a.SET_CURRENT_PAGE}),r.next=19;break;case 18:o({noResult:!0,type:a.SET_NO_RESULT});case 19:case"end":return r.stop()}}))}(e)}},c.a.createElement(R.a,null))),b&&c.a.createElement("p",null,"You should key in something then search."),n.noResult&&c.a.createElement("p",null,"There is no person called ",i))}};function P(e){var t;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(fetch(e));case 2:if(!(t=n.sent)){n.next=12;break}if(200===t.status){n.next=8;break}throw t;case 8:return n.next=10,h.a.awrap(t.json());case 10:return t=n.sent,n.abrupt("return",t);case 12:case"end":return n.stop()}}))}var k="https://api.additivasia.io/api/v1/assignment/employees";function C(e){var t,n,a,r,c;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t="".concat(k,"/").concat(e),o.next=3,h.a.awrap(P(t).catch((function(e){return console.log("no result")})).then((function(e){return e})));case 3:if(!(n=o.sent)){o.next=8;break}if(a=n,r=Object(l.a)(a,2),r[0],!(c=r[1])||!c["direct-subordinates"]){o.next=8;break}return o.abrupt("return",c["direct-subordinates"]);case 8:case"end":return o.stop()}}))}function D(e,t){return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(Promise.all(e.map((function(e){var n;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.includes(e)){a.next=9;break}return a.next=3,h.a.awrap(C(e));case 3:if(!(n=a.sent)){a.next=9;break}return t=[].concat(Object(f.a)(t),Object(f.a)(n)),a.next=8,h.a.awrap(D(n,t));case 8:t=a.sent;case 9:case"end":return a.stop()}}))}))));case 2:return n.abrupt("return",t);case 3:case"end":return n.stop()}}))}var U=Object(p.a)((function(e){return Object(E.a)({demo:{backgroundColor:e.palette.background.paper,margin:"auto",width:"85%"}})}));function B(e){return e.map((function(e,t){return c.a.createElement("p",{key:"".concat(e,"-").concat(t)},e)}))}var L=function(){var e=U(),t=Object(r.useContext)(d),n=t.state,o=t.dispatch,u=Object(i.e)().location.pathname.split("/").splice(-1)[0];return Object(r.useEffect)((function(){""===n.employeeName&&""!==u&&(o({employeeName:u,type:a.SET_EMPLOYEE_NAME}),function(e,t){var n,r;h.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,h.a.awrap(C(e));case 2:if(!(n=c.sent)){c.next=13;break}return c.next=6,h.a.awrap(D(n,[]));case 6:(r=c.sent)!==[]&&t({nonDirectSub:r,type:a.SET_NON_DIRECT_SUB}),t({directSub:n,type:a.SET_DIRECT_SUB}),t({employeeName:e,type:a.SET_EMPLOYEE_NAME}),t({currentPage:"ResultPage",type:a.SET_CURRENT_PAGE}),c.next=14;break;case 13:t({noResult:!0,type:a.SET_NO_RESULT});case 14:case"end":return c.stop()}}))}(u,o))}),[u]),c.a.createElement("div",null,c.a.createElement("h1",null,"Employee Overview"),""!==n.employeeName&&c.a.createElement("div",null,c.a.createElement("div",{className:e.demo},c.a.createElement("p",null,"Subordinates of employee ",n.employeeName,": (",n.directSub.length,")"),c.a.createElement("div",null,B(n.directSub))),0!==n.nonDirectSub.length&&c.a.createElement("div",{className:e.demo},c.a.createElement("p",null,"Non-direct subordinates of employee ",n.employeeName,": (",n.nonDirectSub.length,")"),c.a.createElement("div",null,B(n.nonDirectSub)))))},A=(n(53),function(){var e=Object(r.useReducer)(S,b),t=Object(l.a)(e,2),n=t[0],a=t[1],o=j[n.currentPage];return c.a.createElement(d.Provider,{value:{state:n,dispatch:a}},c.a.createElement("div",{className:"App"},c.a.createElement(s.a,null,c.a.createElement(i.a,{exact:!0,path:"/",component:o}),c.a.createElement(i.a,{path:"/overview/:name",component:L}))))});n(54),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.bdeadff4.chunk.js.map