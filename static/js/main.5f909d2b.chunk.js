(this["webpackJsonpsearch-employees"]=this["webpackJsonpsearch-employees"]||[]).push([[0],{40:function(e,t,a){e.exports=a(55)},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(20),u=a.n(o),s=a(15),i=a(26),l=a(16),p=a(72),m=a(77),E=a(22);!function(e){e.SET_CURRENT_PAGE="SET_CURRENT_PAGE",e.SET_DIRECT_SUB="SET_DIRECT_SUB",e.SET_NON_DIRECT_SUB="SET_NON_DIRECT_SUB",e.SET_EMPLOYEE_NAME="SET_EMPLOYEE_NAME"}(n||(n={}));var b={currentPage:"SearchPage",directSub:[""],employeeName:"",nonDirectSub:[]},d=Object(r.createContext)({});function f(e,t){switch(t.type){case n.SET_CURRENT_PAGE:return Object(E.a)({},e,{currentPage:t.currentPage});case n.SET_DIRECT_SUB:return Object(E.a)({},e,{directSub:t.directSub});case n.SET_NON_DIRECT_SUB:return Object(E.a)({},e,{nonDirectSub:t.nonDirectSub});case n.SET_EMPLOYEE_NAME:return Object(E.a)({},e,{employeeName:t.employeeName});default:return e}}var h=Object(p.a)((function(e){return Object(m.a)({demo:{backgroundColor:e.palette.background.paper,margin:"auto",width:"85%"}})}));function S(e){return e.map((function(e,t){return c.a.createElement("p",{key:"".concat(e,"-").concat(t)},e)}))}var v=function(){var e=h(),t=Object(r.useContext)(d).state,a=Object(l.e)();return console.log(a.location.pathname.split("/")),c.a.createElement("div",null,c.a.createElement("h1",null,"Employee Overview"),""!==t.employeeName&&c.a.createElement("div",null,c.a.createElement("div",{className:e.demo},c.a.createElement("p",null,"Subordinates of employee ",t.employeeName,":"),c.a.createElement("div",null,S(t.directSub))),0!==t.nonDirectSub.length&&c.a.createElement("div",{className:e.demo},c.a.createElement("p",null,"Non-direct subordinates of employee ",t.employeeName,":"),c.a.createElement("div",null,S(t.nonDirectSub)))))},_=a(19),x=a(6),y=a.n(x),N=a(75),O=a(76),g=a(74),T=a(37),w=a.n(T),j=Object(p.a)((function(e){return Object(m.a)({iconButton:{padding:10},input:{flex:1,marginLeft:e.spacing(1)},root:{alignItems:"center",display:"flex",margin:"auto",padding:"2px 4px",width:300}})})),P={ResultPage:v,SearchPage:function(){var e=j(),t=Object(r.useContext)(d).dispatch,a=Object(r.useState)(""),o=Object(s.a)(a,2),u=o[0],i=o[1],l=Object(r.useState)(!1),p=Object(s.a)(l,2),m=p[0],E=p[1],b=Object(r.useState)(!1),f=Object(s.a)(b,2),h=f[0],S=f[1];return c.a.createElement("div",{className:"search-page"},c.a.createElement("h1",null,"Employee Explorer"),c.a.createElement(g.a,{component:"form",className:e.root},c.a.createElement(O.a,{className:e.input,placeholder:"Search Employee Name",inputProps:{"aria-label":"search employee name"},onChange:function(e){return function(e){i(e),""!==e&&E(!1),S(!1)}(e.target.value)}}),c.a.createElement(N.a,{type:"submit",className:e.iconButton,"aria-label":"search",onClick:function(e){return function(e){var a,r;return y.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e.preventDefault(),""!==u){c.next=5;break}E(!0),c.next=19;break;case 5:return c.next=7,y.a.awrap(C(u));case 7:if(!(a=c.sent)){c.next=18;break}return c.next=11,y.a.awrap(D(a,[]));case 11:(r=c.sent)!==[]&&t({nonDirectSub:r,type:n.SET_NON_DIRECT_SUB}),t({directSub:a,type:n.SET_DIRECT_SUB}),t({employeeName:u,type:n.SET_EMPLOYEE_NAME}),t({currentPage:"ResultPage",type:n.SET_CURRENT_PAGE}),c.next=19;break;case 18:S(!0);case 19:case"end":return c.stop()}}))}(e)}},c.a.createElement(w.a,null))),m&&c.a.createElement("p",null,"You should key in something then search."),h&&c.a.createElement("p",null,"There is no person called ",u))}};function k(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(fetch(e));case 2:if(!(t=a.sent)){a.next=12;break}if(200===t.status){a.next=8;break}throw t;case 8:return a.next=10,y.a.awrap(t.json());case 10:return t=a.sent,a.abrupt("return",t);case 12:case"end":return a.stop()}}))}var R="https://api.additivasia.io/api/v1/assignment/employees";function C(e){var t,a,n,r,c;return y.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t="".concat(R,"/").concat(e),o.next=3,y.a.awrap(k(t).catch((function(e){return console.log("no result")})).then((function(e){return e})));case 3:if(!(a=o.sent)){o.next=8;break}if(n=a,r=Object(s.a)(n,2),r[0],!(c=r[1])||!c["direct-subordinates"]){o.next=8;break}return o.abrupt("return",c["direct-subordinates"]);case 8:case"end":return o.stop()}}))}function D(e,t){return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y.a.awrap(Promise.all(e.map((function(e){var a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.includes(e)){n.next=9;break}return n.next=3,y.a.awrap(C(e));case 3:if(!(a=n.sent)){n.next=9;break}return t=[].concat(Object(_.a)(t),Object(_.a)(a)),n.next=8,y.a.awrap(D(a,t));case 8:t=n.sent;case 9:case"end":return n.stop()}}))}))));case 2:return a.abrupt("return",t);case 3:case"end":return a.stop()}}))}a(53);var B=function(){var e=Object(r.useReducer)(f,b),t=Object(s.a)(e,2),a=t[0],n=t[1],o=P[a.currentPage];return c.a.createElement(d.Provider,{value:{state:a,dispatch:n}},c.a.createElement("div",{className:"App"},c.a.createElement(i.a,null,c.a.createElement(l.a,{exact:!0,path:"/",component:o}),c.a.createElement(l.a,{path:"/search-employees/overview/:name",component:v}))))};a(54),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.5f909d2b.chunk.js.map